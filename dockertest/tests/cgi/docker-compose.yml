services:
  # The web server to test
  ferron:
    build:
      context: ../../..
      dockerfile: Dockerfile.test
    volumes:
      - ./ferron.kdl:/etc/ferron.kdl
      - ./cgi-bin:/var/www/ferron/cgi-bin

  # The container copying the CGI binary
  cgi-bin:
    build:
      context: ./cgi-src
    volumes:
      - ./cgi-bin:/usr/lib/cgi-bin

  # A container to run tests
  test-runner:
    build:
      context: ../../runner
    command: "tail -f /dev/null"
